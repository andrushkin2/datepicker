!function(){var e={mainContainer:null,myTab:null,leftButton:null,rightButton:null,centralPane:null,subCentralPane:null,monthContainer:null,yearContainer:null,timeContainer:null,subTimeContainer:null,timeText:null,hour:null,minutes:null,seconds:null,tContTable:null,zones:null,scheduler:null,subSchedulerContainer:null,calendar:null,tableHead:null,tableBody:null,entitySelect:null,buttonPanel:null,buttonNow:null,buttonDone:null,amount:null},t=function(){var t,n=Object.keys(e),a=n.length;for(t=0;a>t;t++)e[n[t]]=null},n=function(n,a,o,r,i){var s,l,u,c,d,h,m,f=this,g=document.body,p=/Android|AppleWebKit|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/gim.test(navigator.userAgent.toLowerCase()),y="ontouchstart"in document.documentElement,v=!!window.navigator.msPointerEnabled,C=!!window.PointerEvent,b=p&&(C||v||y),S=function(){},w=function(t){var n,a=t.target;if(le()&&!a.datepicker){for(n=a;n!==g&&n;){if(n===e.mainContainer)return void Z(e.entitySelect,!1);n=n.parentNode}f.trigger("onHidePicker")}},M=function(){le()&&se(e.mainContainer.inputElemntLast)},T=function(){if("string"==typeof n)s=g.querySelector("#"+n+"[type='text']");else if(n.jquery)s=n[0];else{if("object"!=typeof n)throw new Error("Undefined input element");s=n}if(!s)throw new Error("Undefined input element")},_=function(){e.mainContainer||(e.mainContainer=K("div",{"class":"datepicker_main_container"})),g.appendChild(e.mainContainer)},D=function(){e.myTab=K("div",{"class":"month_year_tab"}),e.mainContainer.appendChild(e.myTab),e.leftButton=K("button",{"class":"month_year_tab_button l_button"}),e.leftButton.innerHTML="&lt;",e.myTab.appendChild(e.leftButton),e.rightButton=K("button",{"class":"month_year_tab_button r_button"}),e.rightButton.innerHTML="&gt;",e.myTab.appendChild(e.rightButton),e.centralPane=K("div",{"class":"central_pane"}),e.myTab.appendChild(e.centralPane),e.subCentralPane=K("div",{"class":"central_pane_sub"}),e.centralPane.appendChild(e.subCentralPane),e.monthContainer=K("div",{"class":"central_pane_month"}),e.subCentralPane.appendChild(e.monthContainer),e.yearContainer=K("div",{"class":"central_pane_year"}),e.subCentralPane.appendChild(e.yearContainer)},N=function(t){if(e.entitySelect){q(e.entitySelect);var n,a,o,r,i,s=t.length,l=e.entitySelect.value,u=function(){var t,n,a=this.value,o=parseInt(a),r=isNaN(o),i=e.entitySelect.showingDate||Le;if(a===e.entitySelect.value){if(!b)return;Z(e.entitySelect,!1)}switch(e.entitySelect.entity){case"month":if(r){if(t=Y(a,Be.shortMonthNames.concat(Be.monthNames)),null===t)return;e.entitySelect.value=t}else e.entitySelect.value=o;n=new Date(i.getFullYear(),e.entitySelect.value,i.getDate(),e.hour.value,e.minutes.value,e.seconds.value);break;case"year":if(r)return;e.entitySelect.value=o,n=new Date(e.entitySelect.value,i.getMonth(),i.getDate(),e.hour.value,e.minutes.value,e.seconds.value);break;default:return}Z(e.entitySelect,!1),isNaN(n)||(Be.changeDateOnClickNewYear&&"year"===e.entitySelect.entity?(re(n),se()):(ae[Be.type](n),se()))};for(a=0;s>a;a++)n=t[a],r=n.toString()===l.toString(),o=K("div",{"class":"entity_child"+(r?" selected":"")},{value:n,onclick:u}),o.appendChild(K("span",{},{innerHTML:n})),e.entitySelect.appendChild(o),r&&(i=o);return i}},k=function(){e.buttonPanel=K("div",{"class":"button_panel"}),e.mainContainer.appendChild(e.buttonPanel),e.buttonNow=K("button",{"class":"button button_now"},{innerHTML:Be.currentText}),e.buttonPanel.appendChild(e.buttonNow),e.buttonDone=K("button",{"class":"button button_done"},{innerHTML:Be.closeText}),e.buttonPanel.appendChild(e.buttonDone)},H=function(){e.entitySelect=K("div",{"class":"entity_select hidden"}),e.mainContainer.appendChild(e.entitySelect)},L=function(){var t,n,a,o,r;for(e.timeContainer=K("div",{"class":"time_container"}),e.mainContainer.appendChild(e.timeContainer),e.subTimeContainer=K("div",{"class":"datepicker_time_container_sub"}),e.timeContainer.appendChild(e.subTimeContainer),e.tContTable=K("table",{"class":"t_cont_table"}),e.subTimeContainer.appendChild(e.tContTable),e.timeText=K("span",{"class":"t_cont_time_text"}),e.hour=K("select",{"class":"select datepicker_time_hour"}),e.minutes=K("select",{"class":"select datepicker_time_minutes"}),e.seconds=K("select",{"class":"select datepicker_time_seconds"}),e.zones=K("select",{"class":"select datepicker_time_zones"}),t=[e.timeText,e.hour,e.minutes,e.seconds,e.zones],r=0;5>r;r++){switch(n=K("tr",{"class":"t_cont_table_row"}),r){case 0:j(n,"time"),o=K("td",{"class":"descr"},{innerHTML:Be.timeText}),a=K("td",{"class":"controls"}),a.appendChild(t[r]);break;case 1:j(n,"hours"),o=K("td",{"class":"descr"},{innerHTML:Be.hourText}),a=K("td",{"class":"controls"}),a.appendChild(t[r]);break;case 2:j(n,"minutes"),o=K("td",{"class":"descr"},{innerHTML:Be.minutesText}),a=K("td",{"class":"controls"}),a.appendChild(t[r]);break;case 3:j(n,"seconds"),o=K("td",{"class":"descr"},{innerHTML:Be.secondsText}),a=K("td",{"class":"controls"}),a.appendChild(t[r]);break;case 4:j(n,"zones"),o=K("td",{"class":"descr"},{innerHTML:Be.zoneText}),a=K("td",{"class":"controls"}),a.appendChild(t[r])}n.appendChild(o),n.appendChild(a),e.tContTable.appendChild(n)}},P=function(){e.scheduler=K("div",{"class":"scheduler"}),e.mainContainer.appendChild(e.scheduler),e.subSchedulerContainer=K("div",{"class":"scheduler_sub"}),e.scheduler.appendChild(e.subSchedulerContainer),e.calendar=K("table",{"class":"scheduler_calendar"}),e.subSchedulerContainer.appendChild(e.calendar),e.tableHead=K("thead",{"class":"calendar_header",align:"center"}),e.calendar.appendChild(e.tableHead),e.tableBody=K("tbody",{"class":"calendar_body",align:"center"}),x(e.tableBody),e.calendar.appendChild(e.tableBody)},x=function(e){var t,n,a,o;for(t=0;6>t;t++){for(a=K("tr",{"class":t+1===6?"datepicker_scheduler_calendar_body_last_row":""}),n=0;7>n;n++)o=K("td",null,{"data-day":"","data-month":"","data-year":""}),a.appendChild(o);e.appendChild(a)}},E=function(e){return 33-new Date(e.getFullYear(),e.getMonth(),33).getDate()},F=function(){var t=new Date(this["data-year"],this["data-month"],this["data-day"],e.hour.value,e.minutes.value,e.seconds.value);ae[Be.type](t),se()},B=function(){var t=Le||Ee,n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),parseInt(e.hour.value),parseInt(e.minutes.value),parseInt(e.seconds.value));isNaN(n)||re(n,function(){f.trigger("onChange")})},O=function(t){t.stopPropagation(),Q(e.entitySelect)&&Z(e.entitySelect,!1)},Y=function(e,t){var n=null;return(t||[]).forEach(function(t,a){t.toLowerCase()===e.toLowerCase()&&(n=a>11?a-12:a)}),n},I=function(){return{toStringFormat:function(e,t){var n=/d{1,4}|M{1,4}|yy(?:yy)?|y|([HhmsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,a=function(e,t){for(e=e.toString(),t=t||2;e.length<t;)e="0"+e;return e},o="get",r=e[o+"Date"](),i=e[o+"Day"](),s=e[o+"Month"](),l=e[o+"FullYear"](),u=e[o+"Hours"](),c=e[o+"Minutes"](),d=e[o+"Seconds"](),h=e[o+"Milliseconds"](),m={d:r,dd:a(r),ddd:Be.shortDayNames[i],dddd:Be.dayNames[i],M:s+1,MM:a(s+1),MMM:Be.shortMonthNames[s],MMMM:Be.monthNames[s],y:parseInt(l.toString().slice(2)),yy:l.toString().slice(2),yyyy:l,h:u%12||12,hh:a(u%12||12),H:u,HH:a(u),m:c,mm:a(c),s:d,ss:a(d),l:a(h,3),L:a(h>99?Math.round(h/10):h),t:12>u?"a":"p",tt:12>u?"am":"pm",T:12>u?"A":"P",TT:12>u?"AM":"PM"};return t.replace(n,function(e){return e in m?m[e]:e.slice(1,e.length-1)})},fromStringFormat:function(e,t){var n,a,o,r,i=/d{1,4}|M{1,4}|yy(?:yy)?|y|([HhmsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,s=function(e,t,n){var a,o="(";for(a=e;t>a;a++)o+=a!==t-1?n[a]+"|":n[a];return o+=")"},l=function(e,t){var n=null;return(t||[]).forEach(function(t,a){t.toLowerCase()===e.toLowerCase()&&(n=a>11?a-12:a)}),n},u=function(e,t){var n,a,o={date:null,month:null,year:null,hours:12,minutes:0,seconds:0,milliseconds:0},r=!1,i=new Date;t.forEach(function(t,n){var i=n+1,s=e[i],u=parseInt(s);switch(a=isNaN(u),t){case"month":o.month=a?l(s,Be.shortMonthNames.concat(Be.monthNames)):u-1;break;case"year":a||(o.year=s.length>2?u:2e3+u);break;case"yearShort":if(!a){var c=u<=Be.shortYearCutoff?2e3:1900;o.year=c+u}break;case"Hours":r=!0,o.hours=a?null:u;break;case"date":case"hours":case"minutes":case"seconds":case"milliseconds":o[t]=a?null:u;break;case"t":r||null===o.hours||(u=s.toLowerCase(),/(a|am)/.test(u)&&o.hours>=12?12===o.hours?o.hours=0:o.hours=o.hours-12:/(p|pm)/.test(u)&&o.hours<12&&(o.hours=o.hours+12))}}),o.date=null!==o.date?o.date:i.getDate(),o.month=null!==o.month?o.month:i.getMonth(),o.year=o.year||i.getFullYear(),o.hours=null!==o.hours?o.hours:0,o.minutes=o.minutes||0,o.seconds=o.seconds||0,o.milliseconds=o.milliseconds||0,a=!1;for(n in o)if(null===n){a=!0;break}return a?null:e=new Date(o.year,o.month,o.date,o.hours,o.minutes,o.seconds,o.milliseconds)},c=[],d="(\\d{1,2})",h="(\\d{2})",m=function(e,t){return function(){return c.push(e),t}},f={d:m("date",d),dd:m("date",h),ddd:m("dateStr",s(0,7,Be.shortDayNames)),dddd:m("dateStr",s(0,7,Be.dayNames)),M:m("month",d),MM:m("month",h),MMM:m("month",s(0,12,Be.shortMonthNames)),MMMM:m("month",s(0,12,Be.monthNames)),y:m("yearShort",d),yy:m("yearShort",h),yyyy:m("year","(\\d{3,4})"),h:m("hours",d),hh:m("hours",h),H:m("Hour",d),HH:m("Hours",h),m:m("minutes",d),mm:m("minutes",h),s:m("seconds",d),ss:m("seconds",h),l:m("milliseconds",d),L:m("milliseconds",h),t:m("t","(a|p)"),tt:m("t","(am|pm)"),T:m("t","(A|P)"),TT:m("t","(AM|PM)")};return n=t.replace(i,function(e){return e in f?f[e]():e.toString()}),a=new RegExp(n,"g"),r=a.exec(e),r&&r.length&&r.length-1===c.length?o=u(r,c):null}}}(),A=function(){var e=document.documentElement;return!!(e&&e.classList&&e.classList.remove&&e.classList.add&&e.classList.contains)}(),j=function(){return A?function(e,t){e.classList.add(t)}:function(e,t){var n=new RegExp("\\s?"+t,"gim"),a=e.className;a?n.test(a)||(e.className+=" "+t):e.className=t}}(),U=function(e,t){var n,a=e.style;for(n in t)t.hasOwnProperty(n)&&(a[n]=t[n])},z=function(e,t,n){var a,o,r=t.length,i=function(e){var t=parseInt(e),n=(13>t?e:e-12)+(12>t?" AM":" PM");return 0===t&&(n+=" (12 AM)"),n};for(a=0;r>a;a++)o=K("option",{"class":"select_option"},{innerHTML:n?i(t[a],n):t[a],value:t[a]}),e.appendChild(o)},q=function(e){for(var t;t=e.firstChild;)e.removeChild(t)},R=function(e){var t,n,a,o=[],r=2e3;if(ce(e))for(n=e.length,t=0;n>t;t++)o.push(e[t].toString());else{if(/c/.test(e))for(e=e.replace(/c/gim,""),a=e.split(":"),t=0;2>t;t++)/-/.test(a[t])?(a[t]=parseInt(a[t].replace("-","")),a[t]=r-(a[t]||0)):(a[t]=parseInt(a[t].replace("+","")),a[t]=r+(a[t]||0));else for(a=e.split(":"),t=0;2>t;t++)a[t]=parseInt(a[t]);if(a[0]>a[1]){var i=a[0];a[0]=a[1],a[1]=i}for(t=a[0];t<=a[1];t++)o.push(t.toString())}if(!o.length)throw new Error("Unknown range of year!\r\nCheck your datepicker options");return o},J=function(e){var t,n,a=[],o=1;if(ce(e))for(n=e.length,t=0;n>t;t++)a.push(Be.monthNames[e[t]-1]);else if(!isNaN(parseInt(e)))for(n=Be.monthNames.length,e>1&&(o=parseInt(e)),t=0;n>t;t+=o)a.push(Be.monthNames[t]);if(!a.length)throw new Error("Unknown range of year!\r\nCheck your datepicker options");return a},W=function(e,t){var n,a=1,o=[];if(ce(e)){var r=e.length;for(t&&(a=t),n=0;r>n;n+=a)o.push(e[n])}return o},Z=function(e,t){e&&(t=void 0===t?!0:t,t?(j(e,"shown"),V(e,"hidden")):(j(e,"hidden"),V(e,"shown")))},K=function(e,t,n){var a,o=document.createElement(e);for(a in t)t.hasOwnProperty(a)&&("class"===a?o.className=t[a]:o.setAttribute(a,t[a]));for(a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o},V=function(){return A?function(e,t){e.classList.remove(t)}:function(e,t){var n=new RegExp("\\s?"+t,"gim"),a=e.className;a&&(e.className=a.replace(n,""))}}(),G=function(){return A?function(e,t){return e.classList.contains(t)}:function(e,t){var n=new RegExp("\\s?"+t,"gim"),a=e.className;return a?n.test(a):!1}}(),Q=function(e){return G(e,"shown")},X=function(e){e.stopPropagation()},$=function(t){var n=t?"add":"remove";g[n+"EventListener"]("click",w,!1),e.mainContainer[n+"EventListener"]("click",O,!1),window[n+"EventListener"]("resize",M,!1),e.entitySelect[n+"EventListener"]("mousewheel",X,!1),e.entitySelect[n+"EventListener"]("scroll",X,!1)},ee=function(){var t=this["data-day"],n=this["data-month"],a=this["data-year"],o=new Date(a,n,t,e.hour.value,e.minutes.value,e.seconds.value);re(o,function(){f.trigger("onChange")})},te=function(e){var t,n=I.toStringFormat(Le,Be[Be.type+"Format"]),a=s.value;n!==a&&(e?(t=I.fromStringFormat(a,Be[Be.type+"Format"]),t&&!isNaN(t)&&null!==t&&(t=oe(t),null!==t&&re(t,function(){f.trigger("onChange")}))):s.value=n)},ne=function(){Z(e.buttonPanel,Be.showButtonPanel),Z(e.buttonNow,Be.showNowButton),e.buttonDone.onclick=function(){ie()},e.buttonNow.onclick=function(){var e=oe(new Date);re(e,function(){f.trigger("onChange")})}},ae=function(){return{date:function(t){var n,a,o,r,i,s,l,u,c,d,f,g,p,y=Ee,v=Le,C=t||null,w=function(t,n,a,o,r){return function(t){var i,s,l,u=e.mainContainer.getBoundingClientRect().height;t.stopPropagation(),e.entitySelect.showingDate=r,e.entitySelect.value=a,e.entitySelect.entity=n,l=N(o),i=e.entitySelect.childElementCount,Z(e.entitySelect),s=e.entitySelect.firstChild.offsetHeight*i,U(e.entitySelect,{top:"0px",left:this.offsetLeft+this.offsetParent.offsetLeft+"px"}),s>u?(j(e.entitySelect,"overflow_y"),l&&(l.scrollIntoView(!0),e.entitySelect.scrollTop=l.offsetTop)):V(e.entitySelect,"overflow_y"),b||(e.entitySelect.onmouseenter=function(){e.entitySelect.onmouseleave=function(){Z(this,!1)}})}},M=1,T=Be.minDayNames.length,_=K("tr");for(te(),ne(),Z(e.timeContainer,!1),Z(e.myTab),Z(e.scheduler),C||(C=v?v:y),s=Be.monthNames[C.getMonth()],l=C.getMonth(),u=C.getFullYear(),r=new Date(u,l,1).getDay(),f=Fe.indexOf(Be.startOfWeek),r=r>f?r-f:7-f+r,i=E(C),a=e.tableBody.querySelectorAll("td"),q(e.tableHead),d=Be.minDayNames.slice(f),c=0;f>c;c++)d.push(Be.minDayNames[c]);for(c=0;T>c;c++)D=K("td",{},{innerHTML:d[c]}),_.appendChild(D);for(e.tableHead.appendChild(_),e.monthContainer.innerHTML=s,e.yearContainer.innerHTML=u,Be.selectingMonth?(e.monthContainer.onclick=w(e.monthContainer,"month",s,h,C),j(e.monthContainer,"hover")):(e.monthContainer.onclick=S,V(e.monthContainer,"hover")),Be.selectingYear?(e.yearContainer.onclick=w(e.yearContainer,"year",u.toString(),m,C),j(e.yearContainer,"hover")):(e.yearContainer.onclick=S,V(e.yearContainer,"hover")),g=oe(new Date(0===l?u-1:u,0===l?11:l-1,1,C.getHours(),C.getMinutes(),C.getSeconds()),!0),e.leftButton.title=Be.monthNames[g.getMonth()]+" "+g.getFullYear(),e.leftButton["data-day"]=e.rightButton["data-day"]=1,e.leftButton["data-month"]=g.getMonth(),e.leftButton["data-year"]=g.getFullYear(),e.leftButton.onclick=F,e.rightButton.onclick=F,p=oe(new Date(11===l?u+1:u,11===l?0:l+1,1,C.getHours(),C.getMinutes(),C.getSeconds()),!1),e.rightButton.title=Be.monthNames[p.getMonth()]+" "+p.getFullYear(),e.rightButton["data-month"]=p.getMonth(),e.rightButton["data-year"]=p.getFullYear(),c=0;c<a.length;c++){var D=a[c];D.className="",r>c?Be.showSiblingMonthsDays?(n=new Date(u,l,1-(r-c),12,0,0),D["data-day"]=n.getDate(),D["data-month"]=n.getMonth(),D["data-year"]=n.getFullYear(),D.onclick=ee,D.innerHTML=n.getDate(),j(D,"number"),j(D,"grey")):(D.onclick=S,D.innerHTML="",D["data-day"]="",D["data-month"]="",D["data-year"]="",j(D,"space")):i>=M?(D.onclick=ee,D.innerHTML=M,D["data-day"]=M,D["data-month"]=l,D["data-year"]=u,j(D,"number"),v&&!isNaN(v)&&M===v.getDate()?l===v.getMonth()&&u===v.getFullYear()&&j(D,"selected_date"):isNaN(y)||M!==y.getDate()||l===y.getMonth()&&u===y.getFullYear()&&j(D,"today_date"),M++):Be.showSiblingMonthsDays?(n=new Date(u,l,M,12,0,0),D["data-day"]=n.getDate(),D["data-month"]=n.getMonth(),D["data-year"]=n.getFullYear(),D.onclick=ee,D.innerHTML=n.getDate(),j(D,"number"),j(D,"grey"),M++):(D.onclick=S,D.innerHTML="",D["data-day"]="",D["data-month"]="",D["data-year"]="",j(D,"space"))}return Be.showSiblingMonthsDays||(o=e.tableBody.querySelector("tr.datepicker_scheduler_calendar_body_last_row"),o.querySelectorAll(".space").length<7?o.style.display="table-row":o.style.display="none"),!0},time:function(){var t,n,a,o=/\s?(tt|t|TT|T)\s?/.exec(Be.timeFormat);return te(),ne(),Z(e.timeContainer),Z(e.myTab,!1),Z(e.scheduler,!1),Be.showSeconds?V(e.tContTable.querySelector(".t_cont_table_row.seconds"),"hidden"):j(e.tContTable.querySelector(".t_cont_table_row.seconds"),"hidden"),Z(e.tContTable.querySelector(".t_cont_table_row.zones"),Be.showZones),q(e.hour),q(e.minutes),q(e.seconds),z(e.hour,u,o&&2===o.length?o[1]:!1),z(e.minutes,c),z(e.seconds,d),Le&&(t=Le.getHours()<10?"0"+Le.getHours().toString():Le.getHours().toString(),n=Le.getMinutes()<10?"0"+Le.getMinutes().toString():Le.getMinutes().toString(),a=Le.getSeconds()<10?"0"+Le.getSeconds().toString():Le.getSeconds().toString(),e.timeText.innerHTML=I.toStringFormat(Le,Be.timeFormat),e.hour.value=t,e.minutes.value=n,e.seconds.value=a),e.hour.onchange=B,e.minutes.onchange=B,e.seconds.onchange=B,!0},datetime:function(t){return ae.date(t),ae.time(),ne(),Z(e.timeContainer),Z(e.myTab),Z(e.scheduler),!0}}}(),oe=function(e,t){var n=e.getDate(),a=e.getMonth(),o=Be.monthNames[a],r=!1,i=function(){var e,t=[],n=h.length;for(e=0;n>e;e++)t.push(Y(h[e],Be.monthNames));return t}(),s=e.getFullYear(),l=s.toString(),f=!1,g=e.getHours()<10?"0"+e.getHours().toString():e.getHours().toString(),p=e.getMinutes()<10?"0"+e.getMinutes().toString():e.getMinutes().toString(),y=e.getSeconds()<10?"0"+e.getSeconds().toString():e.getSeconds().toString(),v=e.getMilliseconds()||0,C=function(e,t){var n,a=e.length;if(t<=e[0])return{min:e[0],max:e[1]};if(t>=e[a-1])return{min:e[a-2],max:e[a-1]};for(n=0;a>n;n++)if(t<e[n])return{min:e[n-1],max:e[n]}},b=function(e){return function(t){return t===e}};if(null===Y(o,h)&&(r=!0),m.some(b(l))||(f=!0),u.some(b(g))||(g=C(u,g),g=void 0!==t&&t?g.min:g.max),c.some(b(p))||(p=C(c,p),p=void 0!==t&&t?p.min:p.max),d.some(b(y))||(y=C(d,y),y=void 0!==t&&t?y.min:y.max),void 0!==t&&t){if(r&&f||!r&&f)return a=i[i.length-1],s=C(m,s).min,!r&&f&&s===m[0]&&(a=i[0]),new Date(s,a,n,g,p,y);r&&!f&&(a=C(i,a).min)}else{if(r&&f||!r&&f)return a=i[0],s=C(m,s).max,!r&&f&&s===m[m.length-1]&&(a=i[i.length-1]),new Date(s,a,n,g,p,y);r&&!f&&(a=C(i,a).max)}return new Date(s,a,n,g,p,y,v)},re=function(e,t){var n,a=function(e){var t,n=new Date(e);return"object"==typeof n&&n&&!isNaN(n)&&(t=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCMilliseconds())),t},o="object"==typeof e?e:a(e);"object"==typeof o&&o&&!isNaN(o)&&(n=oe(o),n.getTime()!==o.getTime()?!Be.autoCorrectDate||Le&&n.getTime()===Le.getTime()||f.trigger("onChangeDate",Le,n):Le&&n.getTime()===Le.getTime()||f.trigger("onChangeDate",Le,n),t&&t())},ie=function(){U(e.mainContainer,{display:"none"})},se=function(t){U(e.mainContainer,{display:"block"}),t=t||s;var n,a,o,r=g.getBoundingClientRect(),i=e.mainContainer.getBoundingClientRect(),l=t.getBoundingClientRect();o={top:0-g.scrollTop,left:0-g.scrollLeft},n=l.bottom-o.top,a=l.left-o.left,n+i.height>r.height&&(n=l.top-i.height>=0?l.top-i.height:r.height-2-i.height),a+i.width>r.width&&(a=r.width-2-i.width),U(e.mainContainer,{top:n+"px",left:a+"px"})},le=function(){return"block"===e.mainContainer.style.display},ue=function(e){e.preventDefault(),f.trigger("onShowPicker")},ce=function(e){return-1!==Object.prototype.toString.call(e).indexOf("Array")},de=function(e){return-1!==Object.prototype.toString.call(e).indexOf("Object")},he=function(){var e,t,n,a,o,r=arguments.length,i=!1,s=arguments[0],l=1;for("boolean"==typeof s&&(i=s,s=arguments[1],l++);l!==r;){for(e=arguments[l],t=Object.keys(e),o=0;o<t.length;o++)n=e[t[o]],i&&(de(n)||ce(n))?(a=s[t[o]]=s[t[o]]||(ce(n)?[]:{}),he(i,a,n)):s[t[o]]=e[t[o]];l++}return s},me=function(){_(),D(),P(),L(),H(),k(),$(!0)},fe=function(e){var t,n=s,a=e?"add":"remove";if(e){j(s,"hasDatePicker");for(t in Be.on)Be.on.hasOwnProperty(t)&&f.on(t,Be.on[t]);f.on("onHidePicker",ge),f.on("onShowPicker",pe),f.on("onChangeDate",ye)}else{V(s,"hasDatePicker");for(t in Be.on)Be.on.hasOwnProperty(t)&&f.off(t,Be.on[t]);f.off("onHidePicker",ge),f.off("onShowPicker",pe),f.off("onChangeDate",ye)}"ontouchstart"in document.documentElement?(n[a+"EventListener"]("touchstart",ue,!1),n[a+"EventListener"]("touchend",ue,!1),n[a+"EventListener"]("focus",ue,!1),n[a+"EventListener"]("input",ve,!1),n[a+"EventListener"]("change",Ce,!1)):(n[a+"EventListener"]("input",ve,!1),n[a+"EventListener"]("change",Ce,!1),n[a+"EventListener"]("click",be,!1),n[a+"EventListener"]("focus",be,!1),n[a+"EventListener"]("blur",Se,!1))},ge=function(){ie()},pe=function(){var t,n,a,o;e.mainContainer.currentInput=s,Le?ae[Be.type]():(q(e.hour),q(e.minutes),q(e.seconds),Me(),t=""===e.hour.value?0:u[0],n=""===e.minutes.value?0:c[0],a=""===e.seconds.value?0:d[0],o=new Date(Ee.getFullYear(),Ee.getMonth(),Ee.getDate(),t,n,a),re(oe(o))),se()},ye=function(t,n){var a=I.toStringFormat(n,Be[Be.type+"Format"]);Le=n,s.value!==a&&(s.value=a),e.mainContainer.currentInput&&e.mainContainer.currentInput!==s||ae[Be.type](n),f.trigger("onAfterChangeDate",t,n)},ve=function(t){t.preventDefault(),e.mainContainer.inputElemntLast=this;var n,a=this.value.trim(),o=new Date(a),r=Be[Be.type+"Format"];return o&&!isNaN(o)&&null!==o||!/[^\/\s\d:\.-]/.test(a)||/tt|TT|T|t|MMMM|MMM|dddd|ddd/.test(r)?(n=I.fromStringFormat(a,r),void(isNaN(n)||null===n||re(n,function(){f.trigger("onChange")}))):void(this.value=a.replace(/[^\/\s\d:\.-]/gi,"").trim())},Ce=function(){var t,n=this.value;e.mainContainer.inputElemntLast=this,t=I.fromStringFormat(n,Be[Be.type+"Format"]),re(t,function(){f.trigger("onChange")})},be=function(t){e.mainContainer.inputElemntLast=this,("focus"!==t.type||e.mainContainer.currentInput!==this)&&(l=this,Le&&te(!0),f.trigger("onShowPicker"))},Se=function(){},we=function(){fe(!1),e.amount-1===0?($(!1),g.removeChild(e.mainContainer),t()):e.amount-=1,delete s.datepicker,He=!0},Me=function(){h=J(Be.rangeMonths),m=R(Be.rangeYears),u=W(Pe,Be.stepHours),c=W(xe,Be.stepMinutes),d=W(xe,Be.stepSeconds)},Te=function(){for(var e,t=[],n=0;60>n;n++)e=10>n?"0"+n.toString():n.toString(),t.push(e);return t},_e=function(){for(var e,t=[],n=0;24>n;n++)e=10>n?"0"+n.toString():n.toString(),t.push(e);return t},De=function(e){var t,n={},a=typeof e;if("undefined"===a)return Be;if("string"===a)return e in Be?Be[e]:void 0;if("object"===a)for(t in e)e.hasOwnProperty(t)&&(e[t]in Be?Be.hasOwnProperty(e[t])&&(n[e[t]]=Be[e[t]]):n[e[t]]=void 0);return n},Ne=function(){Le=null,s.value=""},ke=function(t){var n=typeof t;return"undefined"===n?"undefined":"object"!==n?"undefined":(fe(!1),he(!1,Be,t),fe(!0),Me(),re(Le),Le&&(e.mainContainer.currentInput===s&&le()&&ae[Be.type](),te()),void 0)},He=!1,Le=null,Pe=_e(),xe=Te(),Ee=new Date,Fe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Be={dateFormat:"dd/MM/yy",timeFormat:"HH:mm:ss",datetimeFormat:"dd/MM/yy HH:mm:ss",type:"date",on:{},rangeMonths:0,rangeYears:"c-50:c+50",hourText:"Hours",startOfWeek:"Sunday",minutesText:"Minutes",secondsText:"Seconds",zoneText:"Zone",timeText:"Time",currentText:"Now",closeText:"Done",showButtonPanel:!1,showNowButton:!0,showSiblingMonthsDays:!1,changeDateOnClickNewYear:!1,minDayNames:["Su","Mo","Tu","We","Th","Fr","St"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNames:Fe.slice(),shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],autoCorrectDate:!0,selectingMonth:!0,selectingYear:!0,shortYearCutoff:50,stepMinutes:0,stepSeconds:0,stepHours:0,showSeconds:!1,showZones:!1};return f.on=function(e,t){this._eventHandlers||(this._eventHandlers=[]),this._eventHandlers[e]||(this._eventHandlers[e]=[]),this._eventHandlers[e].push(t)},f.off=function(e,t){var n,a,o=this._eventHandlers[e];if(o)for(a=o.length,n=0;a>n;n++)o[n]===t&&o.splice(n--,1)},f.trigger=function(e){var t,n,a=this._eventHandlers[e];if(a)for(n=a.length,t=0;n>t;t++)a[t].apply(this,[].slice.call(arguments,1))},he(!1,Be,a||{}),T(),s&&s.datepicker?s.datepicker:(e.mainContainer&&e.mainContainer.parentNode?e.amount+=1:(t(),me(),e.amount=1),fe(!0),Me(),s?(s.datepicker={attachEvent:function(e,t){He||f.on(e,t)},detachEvent:function(e,t){He||f.off(e,t)},hide:function(){He||f.trigger("onHidePicker")},show:function(){He||f.trigger("onShowPicker")},setDate:function(e){He||re(e)},getDate:function(){return He?void 0:Le},getOptions:function(e){return He?void 0:De(e)},setOptions:function(e){He||ke(e)},clear:function(){He||Ne()},destroy:function(){return He||we(),He}},s.datepicker):void 0)};if(window.datepicker)throw new Error("datepicker already exists");window.datepicker=function(e,t){return new n(e,t)}}(window);